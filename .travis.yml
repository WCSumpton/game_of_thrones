language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: Xj31THxW9St2yD3AVSpur3U/WIiqXcfuyo+UkhssmCM+XkTsg/2IvCXbEVTd6zmypV++qWeDk8jw8ALm7kDqPsKm4/KttqsTDcdwhVmTTtQiIAMVPisfrXOVgyT9lhlnLP2uSNtFKjthpcuiu9bCblKZtNa1icvwWk+1qm0WNNDewtnWJyjp4FSRGJyPN43l4Gl/7t7l8PCEI5js49VvSC7M3Co9Uyjw4WhxTUpXQJ4K6sV/WHNSYuyJXbLwlbf1TfnLIZ1lHMI3hIe5Migpz1C5FTY+xnVy9YmGMMt0uNHzysp4exQ03tzCEB+SCHzQIDMZjgLGCLHiixbjDf0AAQGShRol8Wf69SDjC1brc8/4ATUmUnK4Sst9yJgFCZ9BvsKyap0brYSSkcTO9QFgqk0CSzfbext8y7A0gYD7U277gPpRtQqGGis6sicQkcgacrKBfSH/NTrUaUIYwSlKmK4uc31ALRbJuaOZ8my62+x7OP3lBTzHUQTiNI751tysSvbwqhVnDEBvkdn0kbSK+Ygo26wo+May5fkAJ7O7MWwQkMXpARIjtopZTFbA/jI8OXXrDcDKSYz8eHBAnlhgcZ2hF4kfTvkaVieoTIZIwtB2eJKVOG9miVye+WzyrshWwqL/7Vp3CtoGre2X/N3xlHto3POCxPYnMixeBYyLc5Q=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
